<div class="eim-form-item">
	<label *ngIf="label" [ngClass]="{'eim-form-label': true, 'eim-form-label-required': required}">{{label}}</label>

	<ng-container *ngIf="!multiple && value">
		<div class="eim-form-input" style="display: block !important;"
				[ngClass]="{'eim-form-no-label': label === null || label === ''}">
			<span *ngIf="topMessage" [innerHTML]="topMessage"></span>
			<div class="eim-form-input-surround">
				<span *ngIf="leftMessage" class="eim-input-form-item-left-message" [innerHTML]="leftMessage"></span>
					<p-datepicker #calendar name="{{name}}"
							[class.ng-dirty]="formControls[0] && formControls[0].dirty" [class.ng-invalid]="formControls[0] && formControls[0].invalid"
							dateFormat="{{ 'EIM.CALENDAR.DATE_FORMAT' | translate }}" appendTo="body" selectOtherMonths="true"
							[showButtonBar]="true" [monthNavigator]="true" [yearNavigator]="true" [yearRange]="CALENDAR_YEAR_RANGE"
							[(ngModel)]="value[0]" [showIcon]="!disabled" [disabled]="disabled" [showOnFocus]=false
							(onClearClick)="onClickClear($event, calendar, 0)" (onSelect)="onSelect($event, 0)" (onBlur)="onBlur($event, 0)" (focusout)="onFocusOut($event, 0)"
							(click)="openCalendar($event, calendar, 0)" (onTodayClick)="onClickToday($event, calendar, 0)" (keydown)="onKeyDown($event, 0)"></p-datepicker>
					<span *ngIf="showTime" class="eim-time-calendar-input-form-item">
						<p-inputnumber inputId="{{name + '_hour_0'}}" [(ngModel)]="hours[0]" [min]="0" [max]="23"
							[disabled]="disabled || !value[0]" (onFocus)="onFocusSpiner(0, 'hour')" (onBlur)="onBlurSpiner(0, 'hour')"
							(ngModelChange)="onChangeTime(0)" [showButtons]="true">
							<ng-template #incrementbuttonicon>
								<span class="pi pi-caret-up"></span>
							</ng-template>
							<ng-template #decrementbuttonicon>
								<span class="pi pi-caret-down"></span>
							</ng-template>
						</p-inputnumber>:
						<p-inputnumber inputId="{{name + '_minute_0'}}" [(ngModel)]="minutes[0]" [min]="0" [max]="59"
							[disabled]="disabled || !value[0]" (onFocus)="onFocusSpiner(0, 'minute')" (onBlur)="onBlurSpiner(0, 'minute')"
							(ngModelChange)="onChangeTime(0)" [showButtons]="true">
							<ng-template #incrementbuttonicon>
								<span class="pi pi-caret-up"></span>
							</ng-template>
							<ng-template #decrementbuttonicon>
								<span class="pi pi-caret-down"></span>
							</ng-template>
						</p-inputnumber>:
						<p-inputnumber inputId="{{name + '_second_0'}}" [(ngModel)]="seconds[0]" [min]="0" [max]="59"
							[disabled]="disabled || !value[0]" (onFocus)="onFocusSpiner(0, 'second')" (onBlur)="onBlurSpiner(0, 'second')"
							(ngModelChange)="onChangeTime(0)" [showButtons]="true">
							<ng-template #incrementbuttonicon>
								<span class="pi pi-caret-up"></span>
							</ng-template>
							<ng-template #decrementbuttonicon>
								<span class="pi pi-caret-down"></span>
							</ng-template>
						</p-inputnumber>
					</span>
				<span *ngIf="rightMessage" class="eim-input-form-item-right-message" [innerHTML]="rightMessage"></span>
			</div>
			<span *ngIf="bottomMessage" [innerHTML]="bottomMessage"></span>
			<!-- <ng-container *ngFor="let error of formControls[0]?.errors | keyvalue">
				<span >{{errorMessageMap.get(error.key)}}</span>
			</ng-container> -->
		</div>
	</ng-container>

	<ng-container *ngIf="multiple">
		<div class="eim-form-input" [ngClass]="{'eim-form-no-label': label === null || label === ''}">
			<span [innerHTML]="topMessage"></span>
				<span class="eim-form-input-multi-surround">
					<div *ngFor="let item of itemsForLoop; let i = index" class="eim-form-input-multi" style="width:100%;">
						<span *ngIf="leftMessage" class="eim-input-form-item-left-message" [innerHTML]="leftMessage"></span>
						<div  class="eim-form-input-multi-input-area">
							<p-datepicker #calendar name="{{name}}_{{i}}"
									[class.ng-invalid]="formControls[i] && formControls[i].invalid" [class.ng-dirty]="formControls[i] && formControls[i].dirty"
									dateFormat="{{ 'EIM.CALENDAR.DATE_FORMAT' | translate }}" appendTo="body" selectOtherMonths="true"
									[showButtonBar]="true" [monthNavigator]="true" [yearNavigator]="true" [yearRange]="CALENDAR_YEAR_RANGE"
									[(ngModel)]="value[i]" [showIcon]="!disabled" [disabled]="disabled"  [showOnFocus]=false
									(onClearClick)="onClickClear($event, calendar, i)" (onSelect)="onSelect($event, i)" (onBlur)="onBlur($event, i)" (focusout)="onFocusOut($event, i)"
									(click)="openCalendar($event, calendar, i)" (onTodayClick)="onClickToday($event, calendar, i)" (keydown)="onKeyDown($event, i)"></p-datepicker>

							<span *ngIf="showTime" class="eim-time-calendar-input-form-item">
								<p-inputnumber inputId="{{name + '_hour_' + i}}" [(ngModel)]="hours[i]" [min]="0" [max]="23"
									[disabled]="disabled || !value[i]" (onFocus)="onFocusSpiner(i, 'hour')" (onBlur)="onBlurSpiner(i, 'hour')"
									(ngModelChange)="onChangeTime(i)" [showButtons]="true">
									<ng-template #incrementbuttonicon>
										<span class="pi pi-caret-up"></span>
									</ng-template>
									<ng-template #decrementbuttonicon>
										<span class="pi pi-caret-down"></span>
									</ng-template>
								</p-inputnumber>:
								<p-inputnumber inputId="{{name + '_minute_' + i}}" [(ngModel)]="minutes[i]" [min]="0" [max]="59"
									[disabled]="disabled || !value[i]" (onFocus)="onFocusSpiner(i, 'minute')" (onBlur)="onBlurSpiner(i, 'minute')"
									(ngModelChange)="onChangeTime(i)" [showButtons]="true">
									<ng-template #incrementbuttonicon>
										<span class="pi pi-caret-up"></span>
									</ng-template>
									<ng-template #decrementbuttonicon>
										<span class="pi pi-caret-down"></span>
									</ng-template>
								</p-inputnumber>:
								<p-inputnumber inputId="{{name + '_second_' + i}}" [(ngModel)]="seconds[i]" [min]="0" [max]="59"
									[disabled]="disabled || !value[i]" (onFocus)="onFocusSpiner(i, 'second')" (onBlur)="onBlurSpiner(i, 'second')"
									(ngModelChange)="onChangeTime(i)" [showButtons]="true">
									<ng-template #incrementbuttonicon>
										<span class="pi pi-caret-up"></span>
									</ng-template>
									<ng-template #decrementbuttonicon>
										<span class="pi pi-caret-down"></span>
									</ng-template>
								</p-inputnumber>
							</span>
							<span *ngIf="rightMessage" class="eim-input-form-item-right-message" [innerHTML]="rightMessage"></span>
						</div>
						<div *ngIf="!disabled" class="eim-form-input-multi-button-area">
							<button pButton type="button" severity="info" class="icon-only-button eim-form-input-multi-button" icon="fa fa-plus"
									pTooltip="{{ 'EIM.LABEL_03010' | translate }}"
									(click)="onPlusClick(i)"></button>
							<button pButton type="button" class="p-button-danger eim-form-input-multi-button icon-only-button" icon="fa fa-minus"
									pTooltip="{{ 'EIM.LABEL_03003' | translate }}"
									(click)="onMinusClick(i)"></button>
						</div>
					</div>
				</span>
			<span *ngIf="bottomMessage" [innerHTML]="bottomMessage"></span>
		</div>
	</ng-container>
</div>

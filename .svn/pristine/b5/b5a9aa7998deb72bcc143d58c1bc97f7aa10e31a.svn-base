<div class="eim-attachement-file-input-form-item eim-form-item">
	<label *ngIf="label" [ngClass]="{'eim-form-label': true, 'eim-form-label-required': required}">{{label}}</label>

	<div class="eim-form-input eim-form-input-selected-list"
			[ngClass]="{'eim-form-no-label': label === null || label === ''}">
		<span *ngIf="topMessage" [innerHTML]="topMessage"></span>
			<div class="eim-form-input-multi-surround">
				<div class="eim-form-input-multi">
					<span *ngIf="leftMessage" class="eim-input-form-item-left-message" [innerHTML]="leftMessage"></span>
						<p-listbox  name="{{name}}"
								[ngClass]="{
									'ng-invalid': (formControls[0] ? (formControls[0].dirty && formControls[0].invalid) : false),
									'ng-dirty': (formControls[0] ? (formControls[0].dirty) : false),
									'eim-form-input-multi-input-area': !disabled, 'eim-form-input-multi-input-area-disabled': disabled}"
								(onChange)="onSelectFiles($event)"
								[options]="data" [multiple]="multiple" [(ngModel)]="selectedData"
								[style]="{'background-color':disabled ? '#eee':'', 'width': '100%', 'max-height': multiple ? '75px' : '25px', 'height': multiple ? '75px' : '25px', 'overflow': multiple ? 'auto' : 'hidden'}">
							<ng-template let-fileitem pTemplate="item">
								<i class="fa {{fileitem.icon}} fa-lg" style="padding-left:3px; padding-right:3px;"></i>
								<a href="#" style="cursor: pointer!important; padding-left:3px; padding-right:3px;" (click)="onClickFileLink($event, fileitem.value)">{{fileitem.label}}</a>
							</ng-template>
						</p-listbox>
						<span *ngIf="rightMessage" class="eim-input-form-item-right-message" [innerHTML]="rightMessage"></span>
						<div *ngIf="!disabled" class="eim-form-input-multi-button-area-container">
							<div class="eim-form-input-multi-button-area">
								<label class="eim-upload-btn eim-form-input-multi-button icon-only-button" pTooltip="{{ 'EIM.LABEL_03008' | translate }}">
									<i class="eim-upload-btn-icon fa fa-upload"></i>
									<input type="file" ng2FileSelect [uploader]="uploader" multiple [ngStyle]="{'display': 'none'}"/>
								</label>
								<button pButton type="button" class="p-button-danger eim-form-input-multi-button icon-only-button" icon="fa fa-times"
										pTooltip="{{ 'EIM.LABEL_03003' | translate }}"
										[disabled]="selectedData.length == 0"
										(click)="onClickDelete($event)"></button>
							</div>
							<div *ngIf="enabledWebDAV" class="eim-form-input-multi-button-area">
								<button pButton type="button" severity="info" class="eim-form-input-multi-button icon-only-button" icon="fa fa-plus" pTooltip="{{ 'EIM.LABEL_03011' | translate }}"
										(click)="onClickShowFileCreator($event)"></button>
								<button pButton type="button" severity="info" class="eim-form-input-multi-button icon-only-button" icon="fa fa-pencil-square-o" pTooltip="{{ 'EIM.LABEL_03048' | translate }}"
										(click)="onClickEdit($event)" [disabled]="!editableWebDAV"></button>
							</div>
						</div>
				</div>
			</div>
		<span *ngIf="bottomMessage" [innerHTML]="bottomMessage"></span>
	</div>
</div>

<ng-container *ngIf="displayFileCreator" novalidate>
	<eim-dialog header="{{ 'EIM.LABEL_01002' | translate }}" width="500" height="100%" [enableMaximize]="false"
			[(visible)]="displayFileCreator" modal="true" (close)="displayFileCreator = false;">
		<form #fileCreateForm="ngForm" autocomplete="off">
			<!-- ファイル種別 -->
			<div class="eim-form-item">
				<label class="eim-form-label eim-form-label-required">{{ 'EIM.LABEL_02013' | translate }}</label>
				<div class="eim-form-input" style="display: block !important;"
						[ngClass]="{'eim-form-no-label': label === null || label === ''}">
				<p-select name="selectedTemplateFilePath" appendTo="body"
						[options]="templateFileSelectItems" [(ngModel)]="selectedTemplateFilePath" [required]="true" [style]="{'width':'100%'}" placeholder="{{ 'EIM.INFO_00002' | translate }}"></p-select>
				</div>
			</div>
			<!-- ファイル名 -->
			<div class="eim-form-item">
				<label class="eim-form-label eim-form-label-required">{{ 'EIM.LABEL_02012' | translate }}</label>
				<div class="eim-form-input" style="display: block !important;">
						<input name="createFileName" type="text" pInputText [ngModel]="createFileName" [required]="true" style="width: 100%;">
				</div>
			</div>
		</form>
		<footer>
			<button pButton type="button" class="p-button-primary" (click)="onClickCreate($event);" icon="fa fa-check" label="{{ 'EIM.LABEL_03005' | translate }}" [disabled]="fileCreateForm.invalid"></button>
		</footer>
	</eim-dialog>
</ng-container>

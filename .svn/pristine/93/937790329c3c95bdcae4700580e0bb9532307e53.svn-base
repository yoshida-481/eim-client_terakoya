<div class="eim-form-detail eim-form-wide" [ngClass]="{'use-flat-type': USE_FORM_FLAT_LAYOUT === true}"
	style="height: 100%;" eim-vertical-container novalidate>
	<div *ngIf="form.status" style="width: 100%; margin-bottom: 6px;">
		<eim-workflow-diagram #workflowDiagram [enableEventHistory]="true" [multiple]="false"
			[zoomFromViewCenter]="true" [componentService]="workflowDiagramComponentService"
			(selected)="onSelectDiagram($event)"></eim-workflow-diagram>
	</div>

	<div class="p-grid eim-flexible-height">
		<div [ngClass]="{'eim-form-deital-left-panel': true, 'eim-form-no-wf': !form.status, 'p-col-6': form.status, 'p-col-12': !form.status}"
			style="padding-top: 0px;">
			<form #propertyForm="ngForm" autocomplete="off">
				<p-accordion [value]="selectedTab()" [multiple]="true"
					(onOpen)="onExpandCurrentAccordion($event, true);"
					(onClose)="onExpandCurrentAccordion($event, false);">
					<div *ngIf="objectTypeLayout">
						<p-accordion-panel [value]="0">
							<p-accordion-header>
								<ng-template #toggleicon let-active="active">
									@if (active) {
									<i class="pi pi-chevron-down p-accordionheader-toggle-icon"></i>
									} @else {
									<i class="pi pi-chevron-right  p-accordionheader-toggle-icon"></i>
									}
								</ng-template>
								{{ 'EIM_FORMS.LABEL_02015' | translate }}
							</p-accordion-header>
							<p-accordion-content>
								<div class="eim-form-item" [ngClass]="{'use-flat-type': USE_FORM_FLAT_LAYOUT === true}">
									<label *ngIf="USE_FORM_FLAT_LAYOUT === false"
										class="eim-form-label">{{'EIM.LABEL_02027' | translate}}</label>
									<label *ngIf="USE_FORM_FLAT_LAYOUT === true"
										class="eim-form-label-flat-type">{{'EIM.LABEL_02027' | translate}}</label>
									<div class="eim-form-input" style="display: flex;">
										<input name="name" type="text" pInputText value="{{form.name}}" disabled="true"
											style="width: 100%;" />
									</div>
								</div>
								<div [ngClass]="{'use-flat-type': USE_FORM_FLAT_LAYOUT === true}" class="eim-form-item">
									<label *ngIf="USE_FORM_FLAT_LAYOUT === false"
										class="eim-form-label">{{'EIM.LABEL_02022' | translate}}</label>
									<label *ngIf="USE_FORM_FLAT_LAYOUT === true"
										class="eim-form-label-flat-type">{{'EIM.LABEL_02022' | translate}}</label>
									<div class="eim-form-input" style="display: flex;">
										<input name="url" type="text" pInputText value="{{url}}" disabled="true"
											style="width: 100%;" />
										<button pButton type="button" severity="info"
											class="icon-only-button eim-form-input-multi-button" ngxClipboard
											icon="fa fa-clipboard"
											style="margin-left: 2px; margin-right: 0px; float: right;"
											pTooltip="{{ 'EIM.LABEL_03026' | translate }}" [cbContent]="url"></button>
									</div>
								</div>
								<eim-hierarchical-attribute-list-input-form-item *ngIf="USE_FORM_FLAT_LAYOUT === false"
									[form]="propertyForm.form"
									[attributeTypeLayoutList]="objectTypeLayout.attributeTypeLayoutList"
									[attributeList]="attributeList"
									[hierarchicalLayoutList]="objectTypeLayout.hierarchicalLayoutList"
									[disabled]="!existsUpdateRole"
									[attributeTypeLayoutOption]="attributeTypeLayoutOption"></eim-hierarchical-attribute-list-input-form-item>

								<eim-flat-type-hierarchical-attribute-list-input-form-item
									*ngIf="USE_FORM_FLAT_LAYOUT === true" [form]="propertyForm.form"
									[attributeTypeLayoutList]="objectTypeLayout.attributeTypeLayoutList"
									[attributeList]="attributeList"
									[hierarchicalLayoutList]="objectTypeLayout.hierarchicalLayoutList"
									[disabled]="!existsUpdateRole"
									[attributeTypeLayoutOption]="attributeTypeLayoutOption"></eim-flat-type-hierarchical-attribute-list-input-form-item>
							</p-accordion-content>
						</p-accordion-panel>
					</div>
					<div *ngIf="currentStatusTypeLayout && currentStatusTypeLayout['_isDisplayable']"
						class="eim-form-detail-accordion-margin">
						<p-accordion-panel [value]="1" [id]="currentStatusTypeLayout['_id']">
							<p-accordion-header>
								<ng-template #toggleicon let-active="active">
									@if (active) {
									<i class="pi pi-chevron-down p-accordionheader-toggle-icon"></i>
									} @else {
									<i class="pi pi-chevron-right  p-accordionheader-toggle-icon"></i>
									}
								</ng-template>
								{{currentStatusTypeLayout.name}}
							</p-accordion-header>
							<p-accordion-content>
								<eim-hierarchical-attribute-list-input-form-item *ngIf="USE_FORM_FLAT_LAYOUT === false"
									[form]="propertyForm.form"
									[attributeTypeLayoutList]="currentStatusTypeLayout.attributeTypeLayoutList"
									[attributeList]="statusTypeAttributeListMap[currentStatusTypeLayout.id]"
									[hierarchicalLayoutList]="currentStatusTypeLayout.hierarchicalLayoutList"
									[disabled]="!existsUpdateRole" [statusTypeId]="form.status.type.id"
									[attributeTypeLayoutOption]="attributeTypeLayoutOption"></eim-hierarchical-attribute-list-input-form-item>

								<eim-flat-type-hierarchical-attribute-list-input-form-item
									*ngIf="USE_FORM_FLAT_LAYOUT === true" [form]="propertyForm.form"
									[attributeTypeLayoutList]="currentStatusTypeLayout.attributeTypeLayoutList"
									[attributeList]="statusTypeAttributeListMap[currentStatusTypeLayout.id]"
									[hierarchicalLayoutList]="currentStatusTypeLayout.hierarchicalLayoutList"
									[disabled]="!existsUpdateRole" [statusTypeId]="form.status.type.id"
									[attributeTypeLayoutOption]="attributeTypeLayoutOption"></eim-flat-type-hierarchical-attribute-list-input-form-item>
							</p-accordion-content>
						</p-accordion-panel>
					</div>
				</p-accordion>
			</form>
		</div>

		<div [ngClass]="form.status ? 'p-col-6' : ''"
			style="height: 100%; padding-top: 0px; padding-right: 0px; overflow: auto; position: relative;">
			<p-accordion [multiple]="true" (onOpen)="onExpandPastAccordion($event, true);"
				(onClose)="onExpandPastAccordion($event, false);">
				<div *ngFor="let layout of pastStatusTypeLayoutList; let i = index; let first = first;">
					<div [ngClass]="{'eim-form-detail-accordion-margin': !first}">
						<p-accordion-panel [value]="i" [id]="layout._id">
							<p-accordion-header>
								<ng-template #toggleicon let-active="active">
									@if (active) {
									<i class="pi pi-chevron-down p-accordionheader-toggle-icon"></i>
									} @else {
									<i class="pi pi-chevron-right  p-accordionheader-toggle-icon"></i>
									}
								</ng-template>
								{{layout.name}}
							</p-accordion-header>
							<p-accordion-content>
								<eim-hierarchical-attribute-list-input-form-item *ngIf="USE_FORM_FLAT_LAYOUT === false"
									[attributeTypeLayoutList]="layout.attributeTypeLayoutList"
									[attributeList]="statusTypeAttributeListMap[layout.id]"
									[hierarchicalLayoutList]="layout.hierarchicalLayoutList"
									[attributeTypeLayoutOption]="attributeTypeLayoutOption"
									disabled="true"></eim-hierarchical-attribute-list-input-form-item>

								<eim-flat-type-hierarchical-attribute-list-input-form-item
									*ngIf="USE_FORM_FLAT_LAYOUT === true"
									[attributeTypeLayoutList]="layout.attributeTypeLayoutList"
									[attributeList]="statusTypeAttributeListMap[layout.id]"
									[hierarchicalLayoutList]="layout.hierarchicalLayoutList"
									[attributeTypeLayoutOption]="attributeTypeLayoutOption"
									disabled="true"></eim-flat-type-hierarchical-attribute-list-input-form-item>
							</p-accordion-content>
						</p-accordion-panel>
					</div>
				</div>
			</p-accordion>
		</div>
	</div>
</div>
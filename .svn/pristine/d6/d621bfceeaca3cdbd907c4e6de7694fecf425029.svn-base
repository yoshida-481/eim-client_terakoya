// ==========================================================================
//	eim-gantt-chart
//
//    Angular Gantt Editorのスタイル
//
//    <div class="eim-menubar-block">
//      <eim-menubar [model]="mainMenuItems"></eim-menubar>
//    </div>
// ==========================================================================
$gantt-header-height: 52px !default;

@use '_variables' as *;
@use '@worktile/gantt/styles/index.scss';

::ng-deep eim-gantt-chart {
	display: block;
	height: 100%;

	.eim-gantt-chart-format-select-button {
		left: $eim-gantt-chart-left-width;
	}

	// チャート表示時
	.eim-gantt-chart-view-chart {
		.eim-gantt-chart-left-container {
			width: $eim-gantt-chart-left-width;
			height: 100%;

			display: grid;
			grid-template-rows: auto 1fr;

			.eim-gantt-chart-left-margin {
				height: calc(#{$eim-table-header-height} + 0.5px);
				border-top: $eim-table-border;
				border-top-color: transparent;
				border-right: $eim-table-border;
			}

			.ag-body-viewport::-webkit-scrollbar {
				width: 0px; // グリッドの縦スクロールバー非表示
			}
			.ag-horizontal-right-spacer.ag-scroller-corner {
				display: none; // グリッド右下の縦スクロールバー用の空白を非表示
			}
		}
		.eim-gantt-chart-right-container {
			width: calc(100% - #{$eim-gantt-chart-left-width});
			height: 100%;
			position: relative;

			.eim-gantt-chart-right-chart-container {
				width: 100%;
				height: calc(100% - #{$eim-table-footer-height});
				position: absolute;
			}
			.eim-gantt-chart-right-margin {
				height: $eim-table-footer-height;
			}
		}
	}

	// グリッド表示時
	.eim-gantt-chart-view-grid {
		.eim-gantt-chart-left-container {
			width: 100%;
			height: 100%;

			display: grid;
			grid-template-rows: auto 1fr;
			.eim-gantt-chart-left-margin {
				height: calc(#{$eim-table-header-height} + 0.5px);
			}
		}
		.eim-gantt-chart-format-select-button {
			display: none;
		}
		.eim-gantt-chart-right-container {
			display: none;
		}
	}
	ngx-gantt {
		top: 2px;
		padding-top: 2px;
		border-bottom: $eim-header-border;

		.gantt {
			.gantt-virtual-scroll-viewport {
				overflow: hidden;
			}
			// チャートヘッダ
			.gantt-header {
				.gantt-calendar svg {
					background: $eim-table-header-background;
					border-top: $eim-header-border;
					border-bottom: $eim-header-border;
				}
			}
			.gantt-main-container {
				height: calc(100% - #{$eim-header-height} * 2);
				background-color: $eim-background-color;
				top: calc(#{$eim-header-height} * 2);
				// 列
				.gantt-item {
					height: $eim-row-height!important;
					border: none;
					.gantt-range, .gantt-bar, .gantt-custom {
						z-index: 20;
					}
					
					// レンジ（タスクバーのグループ）
					.gantt-range {
						top: 6px!important;

						.gantt-range-main {
							// レンジ（タスクバーのグループ）のベース表示
							background: $eim-gantt-chart-task-group-bar-background;
							border: $eim-gantt-chart-task-bar-border;

							// レンジ（タスクバーのグループ）の進捗表示
							.gantt-range-main-progress {
								background: $eim-gantt-chart-task-group-bar-complete-background;
							}
						}

						.gantt-range-triangle {
							border-top: 7px solid $eim-enabled-border-color;
						}
					}

					.gantt-bar .gantt-bar-content {
						// タスクバーのベース表示
						background: $eim-gantt-chart-task-group-bar-background!important;
						border: $eim-gantt-chart-task-bar-border;

						// タスクバーの進捗表示
						.gantt-bar-content-progress  {
							background: $eim-gantt-chart-task-group-bar-complete-background!important;
						}

					}
				}
				.gantt-item:nth-child(even) {
					background: $eim-table-even-row-background;
				}
				.gantt-item:nth-child(odd) {
					background: $eim-table-odd-row-background;
				}

				// 行
				.gantt-item.eim-gantt-chart-selected-row {
					color: $eim-selected-table-row-color;
					font-weight: $eim-selected-table-row-font-weight;
					background: $eim-selected-table-row-background!important;
				}

				// 週末
				.eim-gantt-chart-weekend-wrapper {
					position: relative;
					pointer-events: none;
					.eim-gantt-chart-weekend {
						position: absolute;
						background: $eim-gantt-chart-header-weekend-background;
						z-index: 10;
						pointer-events: none;
					}
				}

			}

			// チャート上部のオーバーレイ 未使用のため非表示にする
			.gantt-calendar-grid-main, .gantt-links-overlay-main {
				display: none;
			}

		}		
	}
}
::ng-deep .eim-font-size-m eim-gantt-chart {
	.primary-text,.secondary-text {
		font-size: 12px;
	} 
}


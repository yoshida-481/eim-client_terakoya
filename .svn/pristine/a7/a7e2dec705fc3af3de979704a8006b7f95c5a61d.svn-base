<ng-container *ngIf="!isHierarchical">
		<div *ngFor="let attributeTypeLayout of attributeTypeLayoutList; let i = index" class="eim-flat-type-hierarchical-attribute-input-form-item-container">
			<eim-flat-type-attribute-input-form-item
					[form]="form" [attributeTypeLayout]="attributeTypeLayout"
					[attribute]="attributeMap[attributeTypeLayout.id]"
					[disabled]="disabled" [statusTypeId]="statusTypeId" [attributeTypeLayoutOption]=attributeTypeLayoutOption
					(changed)="onChangeValue($event)">
			</eim-flat-type-attribute-input-form-item>
		</div>
</ng-container>
<ng-container *ngIf="isHierarchical">
	<div *ngFor="let hierarchicalLayout of hierarchicalLayoutList; let i = index"
		[ngClass]="{'eim-hierarchical-attribute-list-input-form-item-line': level >= 2}" class="eim-flat-type-hierarchical-attribute-input-form-item-container">
		<div *ngIf="!hierarchicalLayout.hierarchicalLayoutList && attributeMap">
			<eim-flat-type-attribute-input-form-item
					[form]="form" [attributeTypeLayout]="hierarchicalLayout.attributeTypeLayout"
					[attribute]="attributeMap[hierarchicalLayout.attributeTypeLayout.id]"
					[disabled]="disabled" [statusTypeId]="statusTypeId" [attributeTypeLayoutOption]=attributeTypeLayoutOption
					(changed)="onChangeValue($event)">
			</eim-flat-type-attribute-input-form-item>

		</div>
		<div *ngIf="hierarchicalLayout.hierarchicalLayoutList && hierarchicalLayout.hierarchicalLayoutList.length > 0" class="eim-hierarchical-attribute-list-input-form-group">
			<!-- 2段組み -->
			<div *ngIf="hierarchicalLayout.labelList[0].name === '_2_columns_'" class="p-grid" style="display: flex; flex-wrap: wrap; box-sizing: border-box;">
				<span [ngClass]="{'eim-hierarchical-attribute-list-input-form-item-line': level >= 2}" style="display: contents;">
					<div *ngFor="let childHierarchicalLayout of hierarchicalLayout.hierarchicalLayoutList; let j = index"
							class="eim-flat-type-hierarchical-attribute-input-form-item-two-columns-container" style="display: contents;">
						<!-- 2段組み内の非表示入力欄は詰めて表示するためにここで消す -->
						<ng-container *ngIf="!attributeTypeLayoutOption.unvisibleAttributeTypeDefinitionNameSet.has(attributeMap[childHierarchicalLayout.attributeTypeLayout.id].attributeType.definitionName)">
							<eim-flat-type-attribute-input-form-item class="p-col-6"
									[form]="form" [attributeTypeLayout]="childHierarchicalLayout.attributeTypeLayout"
									[attribute]="attributeMap[childHierarchicalLayout.attributeTypeLayout.id]"
									[disabled]="disabled"
									[statusTypeId]="statusTypeId" [attributeTypeLayoutOption]=attributeTypeLayoutOption
									(changed)="onChangeValue($event)">
							</eim-flat-type-attribute-input-form-item>
						</ng-container>
					</div>
				</span>
			</div>

			<!-- 2段組み以外 -->
			<div *ngIf="hierarchicalLayout.labelList[0].name !== '_2_columns_'">
				<!-- 1階層目まで-->
				<p-fieldset [legend]="hierarchicalLayout.labelList[0].name"
						[toggleable]="true" [collapsed]="false" *ngIf="level < 2">
					<ng-template #expandicon>
						<span class="pi pi-plus eim-filedset-icon"></span>
					</ng-template>
					<ng-template #collapseicon>
						<span class="pi pi-minus eim-filedset-icon"></span>
					</ng-template>
					<eim-flat-type-hierarchical-attribute-list-input-form-item
							[form]="form"
							[attributeTypeLayoutList]="attributeTypeLayoutList"
							[attributeList]="attributeList"
							[hierarchicalLayoutList]=hierarchicalLayout.hierarchicalLayoutList
							[disabled]="disabled"
							[attributeMap]="attributeMap"
							[statusTypeId]="statusTypeId"
							[attributeTypeLayoutOption]="attributeTypeLayoutOption"
							[parentLevel]="level"
							(changed)="onChangeValue($event)"[dispValid]="dispValid">
					</eim-flat-type-hierarchical-attribute-list-input-form-item>
				</p-fieldset>
				<!-- 2階層目以降 -->
				<div *ngIf="level >= 2" class="eim-form-item eim-hierarchical-attribute-list-input-form-item-group" [ngClass]="{'eim-hierarchical-attribute-list-input-form-item-line': level >= 2}">
					<label [ngClass]="{'eim-form-label': true}">{{hierarchicalLayout.labelList[0].name}}</label>
					<div class="eim-form-input" style="display: block !important;">
						<eim-flat-type-hierarchical-attribute-list-input-form-item
								[form]="form"
								[attributeTypeLayoutList]="attributeTypeLayoutList"
								[attributeList]="attributeList"
								[hierarchicalLayoutList]=hierarchicalLayout.hierarchicalLayoutList
								[disabled]="disabled"
								[attributeMap]="attributeMap"
								[statusTypeId]="statusTypeId"
								[attributeTypeLayoutOption]="attributeTypeLayoutOption"
								[parentLevel]="level"
								(changed)="onChangeValue($event)"[dispValid]="dispValid">
						</eim-flat-type-hierarchical-attribute-list-input-form-item>
					</div>
				</div>
			</div>
		</div>
	</div>
</ng-container>

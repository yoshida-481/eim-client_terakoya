<div class="eim-form-item">
	<label *ngIf="label" [ngClass]="{'eim-form-label': true, 'eim-form-label-required': required}">{{label}}</label>

	<div class="eim-form-input">
		<span *ngIf="topMessage" [innerHTML]="topMessage"></span>
		<div  class="eim-form-input-multi">
			<span *ngIf="leftMessage" class="eim-input-form-item-left-message" [innerHTML]="leftMessage"></span>
			<eim-data-grid #templateFiles class="eim-form-input-multi-input eim-data-grid" style="height: 180px;" [contextMenuItems]="gridContextMenuItems"></eim-data-grid>
			<span *ngIf="rightMessage" class="eim-input-form-item-right-message" [innerHTML]="rightMessage"></span>

			<div *ngIf="isTemplateFilesEditable" class="eim-form-input-multi-button-container">
				<div *ngIf="!disabled" class="eim-form-input-multi-button-row">
					<!-- 雛型ファイル選択 -->
					<button pButton type="button" class="p-button-info eim-form-input-multi-button eim-icon-only-button" icon="fa fa-external-link"
							(click)="onClickSearch($event)" pTooltip="{{ 'EIM.LABEL_03006' | translate }}">
					</button>
					<!-- 削除 -->
					<button pButton type="button"
							class="p-button-danger eim-form-input-multi-button eim-icon-only-button" icon="fa fa-times"
							pTooltip="{{ 'EIM.LABEL_03003' | translate }}"
							[disabled]="templateFiles.getSelectedData().length === 0"
							(click)="onClickDelete($event)">
					</button>
				</div>
			</div>

			<div *ngIf="!isTemplateFilesEditable" class="eim-form-input-multi-button-container">
				<div *ngIf="!disabled" class="eim-form-input-multi-button-row">						
					<!-- 雛型ファイル取込 -->
					<button pButton type="button" class="p-button-info eim-form-input-multi-button eim-icon-only-button" icon="fa fa-download"
							pTooltip="{{ 'EIM_TASKS.LABEL_03022' | translate }}"
							[disabled]="templateFiles.getSelectedData().length === 0"
							(click)="onClickHinagataTorikomi($event)" >
					</button>
				</div>
				<div *ngIf="!disabled" class="eim-form-input-multi-button-row"></div>
				<div *ngIf="!disabled" class="eim-form-input-multi-button-row">
					<!-- 雛型最新化 -->
					<button pButton type="button"
							class="p-button-info eim-form-input-multi-button eim-icon-only-button" icon="fa fa-link fa-flip-vertical eim-icon-link-color-gray"
							pTooltip="{{ 'EIM_TASKS.LABEL_03028' | translate }}"
							[disabled]="templateFiles.getSelectedData().length === 0"
							(click)="onClickUpdatingTemplate($event)">
					</button>
				</div>
				<div *ngIf="!disabled" class="eim-form-input-multi-button-row"></div>
				<div class="eim-form-input-multi-button-row">
					<!-- 一括ダウンロード -->
					<button pButton type="button"
							class="p-button-info eim-form-input-multi-button eim-icon-only-button" icon="eim-icon-download"
							pTooltip="{{ 'EIM_TASKS.LABEL_03029' | translate }}"
							[disabled]="value.length === 0"
							(click)="onClickBulkDownload($event)">
					</button>
					<!-- 改訂履歴 -->
					<button pButton type="button"
							class="p-button-info eim-form-input-multi-button eim-edit-btn eim-icon-only-button" icon="eim-icon-revision-history"
							pTooltip="{{ 'EIM_TASKS.LABEL_03030' | translate }}"
							[disabled]="templateFiles.getSelectedData().length === 0"
							(click)="onClickDispHistory($event)">
					</button>
				</div>
			</div>
		</div>
		<span *ngIf="bottomMessage" [innerHTML]="bottomMessage"></span>
	</div>
</div>


<!-- 雛型ドキュメント選択 -->
<ng-container *ngIf="viewDialogName === 'taskTemplateDocumentMultipleSelector'" novalidate>
	<eim-dialog *ngIf="viewDialogName === 'taskTemplateDocumentMultipleSelector'"
			header="{{ 'EIM_TASKS.LABEL_01013' | translate }}" modal="true" width="1330"
			[visible]="true"
			[enableMaximize]="false"
			(close)="onCloseDialog()">
		<eim-multiple-selector
			[required]="true"
			[componentService]="contentsMultipleSelectorComponentService"
			[selectedData]="selectedSearchResultDtos"
			[columns]="[
				{field: 'objName', headerName: 'EIM.LABEL_02002' | translate, width: 270, suppressFilter:true}
			]"
			[widthBalance]="75"
			(selected)="onSelectTemplateDocument($event)"
		>
			<eim-contents-search
				[parentObjId]=""
				[multiple]="true"
				[selectFlg]="true"
				[targetObj]="targetObjectType"
				[visibleDocumentLink]="false"
				[disablePropertyFlg]="false"
				[suppressChangeHistory]="true"
				[suppressChangeStatus]="true"
				defaultStatus="public"
				[suppressPlaceLink]="true">
			</eim-contents-search>
			<eim-document-dialog-manager></eim-document-dialog-manager>
		</eim-multiple-selector>

	</eim-dialog>
</ng-container>


<!-- 改訂履歴（雛型ファイル） -->
<ng-container *ngIf="viewDialogName === 'revisionHistory'" novalidate>
	<eim-dialog header="{{ 'EIM_DOCUMENTS.LABEL_01006' | translate }}" modal="true" width="1050" height="400"
	[visible]="viewDialogName === 'revisionHistory'" modal="true"  (close)="onCloseDialog()" 
	[name]="name">

		<div class="eim-flexible-height" style="height: 100%;">
			<eim-task-revision-history 
				[targetContent]="templateFiles.getSelectedData()[0]" (errored)="onCloseDialog()"
				[isDispReivisonDetail]="true">
			</eim-task-revision-history>
		</div>
	</eim-dialog>
</ng-container>


<!-- 成果物ファイル登録(雛型ファイル取込) -->
<ng-container *ngIf="viewDialogName === 'createFileFromTemplate'" novalidate>
	<eim-dialog header="{{ 'EIM_TASKS.LABEL_01015' | translate }}" width="500" height="100%"
			[enableMaximize]="false"
			[visible]="viewDialogName === 'createFileFromTemplate'" modal="true" (close)="onCloseDialog()">
		<form #fileCreateForm="ngForm" autocomplete="off">
			<!-- 雛型ファイル -->
			<div class="eim-form-item">
				<label class="eim-form-label eim-form-label-required">{{ 'EIM_TASKS.LABEL_02037' | translate }}</label>
			<div class="eim-form-input" style="display: block !important;">
				<input name="hinagataFileName" type="text" disabled pInputText [(ngModel)]="selectedTemplateFileObject.name" 
					[required]="true" style="width: 100%;">
			</div>
			</div>
			<!-- ファイル名 -->
			<div class="eim-form-item">
				<label class="eim-form-label eim-form-label-required">{{ 'EIM.LABEL_02012' | translate }}</label>
			<div class="eim-form-input" style="display: block !important;">
				<input name="createFileName" type="text" pInputText [(ngModel)]="createFileName" [required]="true" style="width: 100%;">
			</div>
			</div>
		</form>
		<footer>
			<button pButton type="button" class="p-button-primary" (click)="onClickAddOutputFileFromTemplateFile($event)" icon="fa fa-check"
					label="{{ 'EIM.LABEL_03005' | translate }}" [disabled]="fileCreateForm.invalid"></button>
		</footer>
	</eim-dialog>
</ng-container>